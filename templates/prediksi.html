{% extends "base.html" %}

{% block content %}

<div class="container-xxl py-5 bg-primary hero-header mb-5">
  <div class="container my-5 py-5 px-lg-5">
    <div class="row g-5 py-5">
      <div class="col-12 text-center">
        <h1 class="text-white animated zoomIn">Predict</h1>
        <hr class="bg-white mx-auto mt-0" style="width: 90px;">
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb justify-content-center">
            <li class="breadcrumb-item"><a class="text-white" href="/">Home</a></li>
            <li class="breadcrumb-item text-white active" aria-current="page">Predict</li>
          </ol>
        </nav>
      </div>
    </div>
  </div>
</div>

<div class="container">
  <h1 class="text-center mb-4">Input IPS</h1>

  <form id="ips-form" action="{{ url_for('predict') }}" method="post" class="mx-auto" style="max-width: 720px;">
    <div class="row g-3">
      {% for i in range(1,9) %}
      <div class="col-12 col-sm-6">
        <label class="form-label" for="ips{{i}}">IPS {{i}}</label>
        <input
          type="number"
          class="form-control"
          id="ips{{i}}"
          name="ips{{i}}"
          placeholder="Exp. 3.25"
          min="0"
          max="4"
          step="0.01"
          inputmode="decimal"
          required
          value="{{ (form_values['ips' ~ i]|round(2)) if form_values else '' }}"
        />
        <div class="form-text">0.00 s/d 4.00</div>
      </div>
      {% endfor %}
    </div>

    <div class="mt-4 d-flex gap-2">
      <button type="submit" class="btn btn-primary">Predict</button>
      <button type="reset" class="btn btn-outline-secondary">Reset</button>
    </div>
  </form>

  {% if hasil_prediksi is not none %}
  <div class="mt-5">
    <h3 class="text-center">Result Prediction</h3>
    <div class="alert alert-info text-center fs-4 text-uppercase" role="alert">
      {{ hasil_prediksi }}
    </div>
  </div>
  {% endif %}
</div>

<hr>

<!-- Auto-convert koma -> titik sebelum submit -->
<script>
  (function () {
    const form = document.getElementById('ips-form');
    form.addEventListener('submit', function () {
      for (let i = 1; i <= 8; i++) {
        const el = document.getElementById('ips' + i);
        if (el && typeof el.value === 'string') {
          // ganti koma menjadi titik agar aman diparse di server
          el.value = el.value.replace(',', '.');
        }
      }
    });
  })();
</script>

{% endblock %}
